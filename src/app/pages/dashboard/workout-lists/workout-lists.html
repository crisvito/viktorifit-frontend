<div class="font-poppins px-5 min-[568px]:px-10 md:px-0 md:pr-5 pb-20">
  <div class="flex w-full h-12 mb-2 relative z-30">
    <div
      class="flex-1 flex items-center border-[0.5px] border-[#B9B9B9] bg-[#F2F2F2] rounded-l-xl px-4 h-full relative"
    >
      <img
        src="/pages/workout-lists/search.svg"
        alt="Search"
        class="w-6 h-6 md:w-7 md:h-7 mr-3 opacity-100"
      />

      <input
        type="text"
        [(ngModel)]="searchText"
        (input)="onTyping()"
        (focus)="onTyping()"
        (blur)="hideSuggestions()"
        (keyup.enter)="onSearch()"
        placeholder="Search Tutorial"
        class="flex-1 bg-transparent outline-none text-left text-black placeholder-[#B9B9B9] h-full text-sm md:text-base"
        autocomplete="off"
      />

      <div
        *ngIf="showSuggestions"
        class="absolute top-full left-0 w-full bg-white border border-gray-200 rounded-b-xl shadow-lg mt-1 overflow-hidden z-40"
      >
        <ul>
          <li
            *ngFor="let term of filteredSuggestions"
            (click)="selectSuggestion(term)"
            class="px-4 py-3 hover:bg-gray-100 cursor-pointer flex items-center gap-3 transition-colors border-b border-gray-50 last:border-0"
          >
            <img src="/pages/workout-lists/search.svg" class="w-4 h-4 opacity-40" alt="search" />
            <span class="text-sm text-black font-medium">{{ term }}</span>
          </li>
        </ul>
      </div>
    </div>

    <button
      (click)="onSearch()"
      class="bg-black text-white px-6 md:px-10 hover:bg-gray-800 transition-colors rounded-r-xl w-auto md:w-28 flex items-center justify-center text-[14px]"
    >
      Search
    </button>
  </div>

  <div class="pt-5 flex flex-col md:flex-row md:items-center gap-4 md:gap-0 mb-7 relative z-10">
    <div class="flex flex-wrap gap-3 md:gap-4 text-[13px]">
      <button
        (click)="setFilter('All')"
        class="group px-5 h-8 border-[0.5px] border-black rounded-2xl flex items-center justify-center gap-2 cursor-pointer transition"
        [class.bg-black]="activeFilter === 'All'"
        [class.text-white]="activeFilter === 'All'"
        [class.hover:bg-black]="activeFilter !== 'All'"
        [class.hover:text-white]="activeFilter !== 'All'"
      >
        <img
          src="/pages/workout-lists/all.svg"
          alt=""
          class="w-3.5 h-3.5 transition brightness-0"
          [class.invert]="activeFilter === 'All'"
          [class.group-hover:invert]="activeFilter !== 'All'"
        />
        All
      </button>

      <button
        (click)="setFilter('Cardio')"
        class="group px-5 h-8 border-[0.5px] border-black rounded-2xl flex items-center justify-center gap-2 cursor-pointer transition"
        [class.bg-black]="activeFilter === 'Cardio'"
        [class.text-white]="activeFilter === 'Cardio'"
        [class.hover:bg-black]="activeFilter !== 'Cardio'"
        [class.hover:text-white]="activeFilter !== 'Cardio'"
      >
        <img
          src="/pages/workout-lists/workout-run.svg"
          alt=""
          class="w-3.5 h-3.5 transition brightness-0"
          [class.invert]="activeFilter === 'Cardio'"
          [class.group-hover:invert]="activeFilter !== 'Cardio'"
        />
        Cardio
      </button>

      <button
        (click)="setFilter('Muscular')"
        class="group px-5 h-8 border-[0.5px] border-black rounded-2xl flex items-center justify-center gap-2 cursor-pointer transition"
        [class.bg-black]="activeFilter === 'Muscular'"
        [class.text-white]="activeFilter === 'Muscular'"
        [class.hover:bg-black]="activeFilter !== 'Muscular'"
        [class.hover:text-white]="activeFilter !== 'Muscular'"
      >
        <img
          src="/pages/workout-lists/muscular.svg"
          alt=""
          class="w-3.5 h-3.5 transition brightness-0"
          [class.invert]="activeFilter === 'Muscular'"
          [class.group-hover:invert]="activeFilter !== 'Muscular'"
        />
        Muscular
      </button>
    </div>

    <div class="ml-0 md:ml-auto flex items-center gap-3 z-20">
      <span class="text-gray-600 font-medium text-[16px]">Sort by :</span>

      <div class="relative">
        <button
          (click)="toggleSort()"
          class="flex items-center gap-2 bg-black px-7 py-1 rounded-xl font-light hover:brightness-95 transition text-white relative z-30"
        >
          <span>{{ sortValue }}</span>
          <img
            src="/pages/workout-lists/Chevron.svg"
            alt=""
            class="transition-transform duration-200"
            [class.rotate-180]="isSortOpen"
          />
        </button>

        <div
          *ngIf="isSortOpen"
          (click)="toggleSort()"
          class="fixed inset-0 z-20 bg-transparent cursor-default"
        ></div>

        <div
          *ngIf="isSortOpen"
          class="absolute top-full right-0 mt-2 w-27 z-30 animate-in fade-in zoom-in-95 duration-100"
        >
          <div class="bg-gray-100 rounded-xl shadow-xl border border-gray-200 overflow-hidden">
            <div
              (click)="setSort('A - Z')"
              class="px-4 py-2 text-center font-bold cursor-pointer transition border-b border-gray-200 text-[16px] hover:bg-gray-200"
              [class.bg-white]="sortValue === 'A - Z'"
              [class.text-black]="sortValue === 'A - Z'"
              [class.text-gray-500]="sortValue !== 'A - Z'"
            >
              A - Z
            </div>
            <div
              (click)="setSort('Z - A')"
              class="px-4 py-2 text-center font-bold cursor-pointer transition hover:bg-gray-200"
              [class.bg-white]="sortValue === 'Z - A'"
              [class.text-black]="sortValue === 'Z - A'"
              [class.text-gray-500]="sortValue !== 'Z - A'"
            >
              Z - A
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-2 relative z-0">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3.5">
      <div
        *ngFor="let item of filteredWorkouts"
        [routerLink]="['/dashboard/workout-detail', item.id]"
        class="bg-white rounded-2xl border border-gray-200 shadow-sm transition-all duration-300 p-3 hover:bg-[#F0FFCC] hover:border-[0.5px] hover:border-[#DBF3A3] hover:shadow-lg cursor-pointer group"
      >
        <div class="h-44 w-full rounded-2xl overflow-hidden bg-gray-100 relative">
          <img
            [src]="item.image"
            [alt]="item.title"
            class="w-full h-full object-cover"
            alt="title"
          />
        </div>

        <div class="px-1 pt-2 pb-1 flex flex-col gap-5">
          <h3 class="font-medium text-[20px] pb-1 text-black">{{ item.title }}</h3>
          <div class="flex items-center justify-between h-10">
            <div class="flex items-center gap-3">
              <div class="bg-[#A3E635] px-3 py-1 rounded-full flex items-center gap-1">
                <img
                  *ngIf="item.type === 'Cardio'"
                  src="/pages/workout-lists/workout-run.svg"
                  alt="Cardio"
                  class="w-3 h-3"
                />
                <img
                  *ngIf="item.type === 'Muscular'"
                  src="/pages/workout-lists/muscular.svg"
                  alt="Muscular"
                  class="w-3 h-3"
                />
                <span class="text-[10px] font-medium tracking-wide text-[#4E7000]">{{
                  item.type
                }}</span>
              </div>
              <div class="h-4 w-px bg-gray-300 group-hover:bg-black/20 transition-colors"></div>
              <span
                class="text-xs font-medium text-gray-500 group-hover:text-black transition-colors"
                >{{ item.duration }} Minutes</span
              >
            </div>
            <button
              aria-label="play"
              class="w-10 h-10 bg-[#A3E635] rounded-full flex items-center justify-center transition shadow-md border-[0.62px] border-[#6A9700]"
            >
              <img
                src="/pages/workout-lists/play.svg"
                class="w-5 h-5 ml-0.5 text-[#4E7000]"
                alt=""
              />
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      *ngIf="filteredWorkouts.length === 0"
      class="text-center py-20 bg-gray-50 rounded-4xl mt-4 border-2 border-dashed border-gray-300"
    >
      <p class="text-gray-500 text-lg font-medium">No workouts found matching "{{ searchText }}"</p>
    </div>
  </div>
</div>

<div class="mb-8 font-poppins text-gray-800 px-5 min-[568px]:px-10 md:px-0 md:pr-5">
  <div class="relative mb-6 md:mb-8 overflow-hidden rounded-2xl bg-black text-white">
    <div class="absolute inset-0 -bottom-20 z-0 opacity-100">
      <img
        src="pages/suggestion/city.png"
        alt="City Background"
        class="w-full h-full object-cover object-bottom grayscale"
      />
      <div class="absolute inset-0 bg-linear-to-r from-black via-black/50 to-transparent"></div>
    </div>

    <div class="absolute right-0 bottom-0 top-0 z-10 h-full w-[40%] md:w-[35%]">
      <img
        [src]="workoutImage"
        [alt]="workoutTitle"
        class="h-full w-full object-contain object-bottom-right"
      />
    </div>

    <div class="relative z-20 p-6 md:p-12 w-full max-w-[65%] md:max-w-[70%]">
      <h1 class="text-[18px] md:text-[24px] font-semibold leading-tight">
        Hello <span class="text-[#C3F74A]">{{ userName }}</span
        >, today is <span class="text-white">{{ workoutTitle }}</span
        >!
      </h1>

      <p class="mt-3 text-xs md:text-sm text-gray-300 opacity-90 leading-relaxed font-light">
        {{ workoutDesc }}
      </p>
    </div>
  </div>

  <div class="grid grid-cols-1 gap-3 lg:grid-cols-12">
    <!-- Todays Plan -->
    <section class="lg:col-span-7 rounded-xl bg-white p-4 md:p-6 shadow-sm">
      <div class="mb-4 flex items-center justify-between">
        <h2 class="text-[20px] md:text-[24px] font-semibold text-[#313131]">Today's Plan</h2>

        <div class="flex items-center gap-3 md:gap-4">
          <div class="relative">
            <select
              title="enviroment"
              [(ngModel)]="selectedEnvironment"
              (change)="onEnvironmentChange(selectedEnvironment)"
              class="appearance-none bg-[#F3F4F6] border-none text-[12px] md:text-[14px] font-medium py-2 px-4 pr-8 rounded-lg outline-none focus:ring-2 focus:ring-[#C3F74A] cursor-pointer text-gray-700"
            >
              <option value="home">üè† Home</option>
              <option value="gym">üèãÔ∏è Gym</option>
            </select>

            <div
              class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500"
            >
              <svg
                class="fill-current h-4 w-4"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
              >
                <path
                  d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"
                />
              </svg>
            </div>
          </div>
          <a
            routerLink="/dashboard/schedule"
            class="group flex items-center gap-1 text-[12px] md:text-[14px] font-medium text-gray-500 hover:text-[#4E7000] transition-colors cursor-pointer"
          >
            See Detail
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="w-3 h-3 md:w-4 md:h-4 transition-transform duration-200 group-hover:translate-x-1"
            >
              <path d="M5 12h14"></path>
              <path d="m12 5 7 7-7 7"></path>
            </svg>
          </a>
        </div>
      </div>

      <div class="w-full overflow-y-auto max-h-[500px] pr-2 custom-scrollbar">
        <table class="w-full text-left border-collapse">
          <thead class="sticky top-0 z-10 bg-white">
            <tr class="text-[10px] md:text-[12px] text-gray-400 border-b border-gray-100">
              <th class="pb-4 pt-2 font-medium pl-0 md:pl-2">Activity Information</th>
              <th class="pb-4 pt-2 font-medium text-center">Duration</th>
            </tr>
          </thead>

          <tbody class="divide-y divide-gray-100">
            <tr *ngFor="let item of todayActivities" class="even:bg-gray-50 transition-colors">
              <td class="py-3 md:py-4 pl-0 md:pl-2">
                <div class="flex items-center gap-2 md:gap-4">
                  <div
                    class="h-9 w-9 md:h-12 md:w-12 shrink-0 overflow-hidden rounded-xl bg-gray-100"
                  >
                    <img
                      [src]="item.imageUrl"
                      [alt]="item.name"
                      class="h-full w-full object-cover"
                    />
                  </div>
                  <div class="flex flex-col items-start gap-0.5 md:gap-1">
                    <p class="font-semibold text-gray-800 text-[11px] md:text-[14px] leading-tight">
                      {{ item.name }}
                    </p>
                    <span
                      class="bg-[#C3F74A] text-[#425F00] text-[8px] md:text-[10px] px-2 py-0.5 rounded-full font-semibold"
                    >
                      {{ item.category }}
                    </span>
                  </div>
                </div>
              </td>

              <td class="text-center text-[10px] md:text-[12px] font-medium text-gray-600">
                {{ item.duration }} min
              </td>
            </tr>

            <tr *ngIf="todayActivities.length === 0">
              <td colspan="3" class="py-10 text-center text-gray-400 text-sm">
                No activities scheduled for today. Enjoy your rest!
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section
      class="lg:col-span-5 rounded-xl bg-linear-to-t from-[#A9EA13] to-[#D2F57F] p-6 md:p-8 flex flex-col shadow-lg text-gray-800"
    >
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-semibold font-poppins text-gray-900">Suggestions To You</h2>
        <a
          routerLink="/dashboard/workout-lists"
          class="text-sm text-gray-400 hover:text-black cursor-pointer transition-colors"
        >
          View All >
        </a>
      </div>

      <div class="space-y-4 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar">
        <div
          *ngFor="let item of workoutslist"
          class="bg-white rounded-2xl border border-gray-100 shadow-xs transition-all duration-300 p-3 hover:bg-[#F0FFCC] hover:border-[#DBF3A3] hover:shadow-md cursor-pointer group flex flex-row gap-4 items-center"
        >
          <div class="h-20 w-20 md:h-24 md:w-24 rounded-xl overflow-hidden bg-gray-100 shrink-0">
            <img
              [src]="item.image"
              [alt]="item.title"
              class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
            />
          </div>

          <div class="flex-1 min-w-0">
            <h3 class="font-bold text-sm md:text-base text-gray-800 truncate mb-2">
              {{ item.title }}
            </h3>

            <div class="flex items-center justify-between">
              <div class="flex items-center gap-2 md:gap-3">
                <div class="bg-[#A3E635] px-2.5 py-1 rounded-full flex items-center gap-1">
                  <img
                    *ngIf="item.type === 'Cardio'"
                    src="/pages/workout-lists/workout-run.svg"
                    alt="Cardio"
                    class="w-3 h-3"
                  />
                  <img
                    *ngIf="item.type === 'Muscular'"
                    src="/pages/workout-lists/muscular.svg"
                    alt="Muscular"
                    class="w-3 h-3"
                  />
                  <span
                    class="text-[9px] md:text-[10px] font-bold tracking-wide text-[#4E7000] uppercase"
                  >
                    {{ item.type }}
                  </span>
                </div>
              </div>

              <button
                (click)="goToDetail(item.id)"
                aria-label="play"
                class="w-8 h-8 md:w-10 md:h-10 bg-[#A3E635] rounded-full flex items-center justify-center transition shadow-sm border border-[#6A9700] hover:scale-110 active:scale-95 shrink-0"
              >
                <img
                  src="/pages/workout-lists/play.svg"
                  class="w-4 h-4 md:w-5 md:h-5 ml-0.5"
                  alt="play"
                />
              </button>
            </div>
          </div>
        </div>

        <div
          *ngIf="workoutslist.length === 0"
          class="py-10 text-center text-gray-400 text-sm italic"
        >
          No suggestions for now...
        </div>
      </div>
    </section>

    <section
      class="lg:col-span-5 rounded-xl bg-black p-4 md:p-6 text-white shadow-sm flex flex-col justify-between relative overflow-hidden min-h-[350px] md:min-h-[400px]"
    >
      <div
        class="absolute bottom-0 right-0 h-48 w-48 md:h-64 md:w-64 rounded-full border-[20] md:border-[30] border-gray-800/50 translate-x-1/4 translate-y-1/4 pointer-events-none"
      ></div>
      <div
        class="absolute -top-16 -left-16 h-48 w-48 md:h-64 md:w-64 rounded-full border-[20] md:border-[30] border-gray-800/50 pointer-events-none"
      ></div>

      <div class="flex items-center gap-2 mb-4 md:mb-6 z-10">
        <h2 class="text-lg md:text-xl font-semibold">Body Condition</h2>
      </div>

      <div class="flex flex-1 z-10 gap-3">
        <div class="flex flex-col w-1/2 gap-4 md:gap-4 pr-1">
          <div class="flex gap-4 md:gap-7">
            <div>
              <p class="text-[10px] md:text-xs text-gray-400 mb-0.5 font-['Poppins']">Height</p>
              <p class="text-sm md:text-base font-medium">{{ bodyCondition.height }} cm</p>
            </div>
            <div>
              <p class="text-[10px] md:text-xs text-gray-400 mb-0.5 font-['Poppins']">Weight</p>
              <p class="text-sm md:text-base font-medium">{{ bodyCondition.weight }} kg</p>
            </div>
          </div>

          <div>
            <p class="text-[10px] md:text-xs text-gray-400 mb-0.5 font-['Poppins']">Category</p>
            <p class="text-sm md:text-base font-medium text-lime-400">
              {{ bodyCondition.bmiCategory }}
            </p>
          </div>

          <div>
            <p class="text-[10px] md:text-xs text-gray-400 mb-0.5 font-['Poppins']">Body Fat</p>
            <p class="text-sm md:text-base font-medium">{{ bodyCondition.bodyFat }} %</p>
          </div>

          <div>
            <p class="text-[10px] md:text-xs text-gray-400 mb-0.5 font-['Poppins']">Fitness Goal</p>
            <p class="text-sm md:text-base font-medium">{{ bodyCondition.goal }}</p>
          </div>
        </div>

        <div class="w-1/2 flex items-start justify-center relative h-[60%]">
          <div class="w-full h-full flex items-start justify-center relative z-10">
            <img
              [src]="bodyCondition.bodyFatImage"
              [alt]="bodyCondition.bodyFatCategory"
              class="h-96 w-auto object-contain object-top"
            />
          </div>
        </div>
      </div>

      <button
        class="z-10 mt-4 text-sm bg-(--main-color) py-3 font-semibold text-gray-900 border-2 border-transparent hover:bg-black hover:text-white hover:shadow-md hover:border-gray-800 transition rounded-xl"
      >
        More Information
      </button>
    </section>

    <!-- Statistic -->
    <section
      class="lg:col-span-7 rounded-xl bg-white p-4 md:p-6 shadow-sm flex flex-col justify-between"
    >
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg md:text-xl font-semibold flex items-center gap-2">Statistic</h2>
        <a
          routerLink="/dashboard/statistics"
          class="text-xs md:text-sm font-medium text-gray-500 hover:text-black flex items-center gap-1 cursor-pointer"
        >
          More Info <span>‚Ä∫ </span>
        </a>
      </div>

      <div class="flex flex-wrap items-center gap-4 md:gap-6 mb-4 md:mb-6 pl-1 md:pl-2">
        <div class="flex items-center gap-2">
          <span
            class="h-2.5 w-2.5 md:h-3 md:w-3 rounded-full"
            [style.backgroundColor]="getActiveTab()?.color"
          ></span>
          <span class="text-[10px] md:text-xs text-gray-600">Your {{ getLabel() }}</span>
        </div>
      </div>

      <div class="relative h-52 md:h-60 w-full">
        <canvas baseChart [data]="lineChartData" [options]="lineChartOptions" [type]="'line'">
        </canvas>
      </div>

      <div class="mt-4 md:mt-6 w-full overflow-x-auto pb-2 scrollbar-hide">
        <div
          class="mt-4 md:mt-6 w-full overflow-x-auto pb-4 [&::-webkit-scrollbar]:h-1.5 [&::-webkit-scrollbar-track]:bg-transparent [&::-webkit-scrollbar-thumb]:bg-gray-300 [&::-webkit-scrollbar-thumb]:rounded-full hover:[&::-webkit-scrollbar-thumb]:bg-gray-400"
        >
          <div class="flex xl:grid xl:grid-cols-3 gap-3 md:gap-4 min-w-max xl:min-w-0 px-1">
            <button
              *ngFor="let tab of tabs"
              (click)="setChartType($any(tab.id))"
              [class]="
                selectedChart === tab.id
                  ? 'bg-[#C3F74A] border border-[#8AC500]/30 shadow-md ring-1 ring-[#8AC500]/20'
                  : 'bg-transparent opacity-60 border border-gray-100 hover:opacity-100 hover:bg-gray-50 hover:border-gray-300 hover:shadow-sm'
              "
              class="relative shrink-0 min-w-[135px] xl:w-auto p-2 md:p-3 rounded-xl transition-all duration-300 flex items-center gap-2 md:gap-3 text-left"
            >
              <div
                [class]="'bg-' + tab.color + '-100 text-' + tab.color + '-600'"
                class="flex h-8 w-8 md:h-10 md:w-10 shrink-0 items-center justify-center rounded-lg md:rounded-xl text-base md:text-xl transition-colors"
              >
                {{ tab.icon }}
              </div>

              <div class="whitespace-nowrap">
                <p class="text-[9px] md:text-[10px] text-gray-500 leading-tight">
                  {{ tab.label }}
                </p>
                <p class="text-xs md:text-[16px] font-semibold text-gray-800">
                  {{ tab.value }}
                </p>
              </div>
            </button>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>

<div class="font-poppins px-5 min-[568px]:px-10 md:px-0 md:pr-4 pb-20 w-full relative">

    <div class="flex flex-col md:flex-row md:items-center justify-between mb-6 mt-6 md:mb-16 md:mt-9 gap-4">
        <h2 class="text-[28px] font-bold">Schedule</h2>
    </div>

    <div class="grid grid-cols-1 mt-5 lg:grid-cols-3 gap-4">

        <div class="lg:col-span-2">

            <div class="flex flex-wrap items-center justify-between mb-5">
                <div class="flex items-center gap-4">
                    <h3 class="text-[28px] font-bold">History Activity</h3>
                </div>
                <button (click)="closeHistory()" class="w-10 h-10 rounded-full bg-[#EDEDED] flex items-center justify-center hover:bg-[#dcdcdc] transition cursor-pointer">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 text-black">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <div class="mb-7">
                <button class="flex items-center gap-2 px-6 py-1.5 rounded-full border border-[#808080] hover:bg-gray-50 transition text-[14px] font-medium text-[#565656] cursor-pointer">
                    Nov 2025
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-500">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                    </svg>
                </button>
            </div>

            <div class="space-y-8">

                <div>
                    <div class="flex items-center gap-3 justify-between mb-5">
                        <h3 class="text-[28px] font-bold">Activity List</h3>
                    </div>
                    <p class="text-gray-500 font-medium text-[20px] mb-5">Wed, 10 Nov 2025</p>

                    <div class="flex flex-col gap-5">
                        <div *ngFor="let item of todayActivities; let i = index" class="bg-[#F9F9F9] rounded-[8px] border border-[#E6E6E6] overflow-hidden transition-all duration-300">
                            
                            <div class="p-6">
                                <div class="flex flex-col md:flex-row gap-6 mb-2">
                                    <div class="w-24 h-24 bg-[#BCE455] rounded-xl flex items-center justify-center flex-shrink-0">
                                        <img src="/assets/icons/running-man.svg" alt="icon" class="w-12 h-12 text-black">
                                    </div>
                                    <div class="flex-1 flex flex-col">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h4 class="text-[18px] font-bold text-[#1F1F1F]">{{ item.title }}</h4>
                                                <p class="text-[12px] text-[#757575] mt-1 leading-relaxed max-w-md">{{ item.description }}</p>
                                            </div>
                                            <div class="flex flex-col gap-2 shrink-0 ml-4 mt-4 md:mt-0 items-end">
                                                <div class="flex items-center gap-2 text-[12px] text-[#5C8C00] font-bold">
                                                    <div class="w-5 h-5 bg-[#6A9700] flex items-center justify-center rounded-[4px]"><img src="/assets/calendar/duration.svg" alt="" class="w-3 h-3"></div> {{ item.time }}
                                                </div>
                                                <div class="flex items-center gap-2 text-[12px] text-[#E10000] font-bold">
                                                    <div class="w-5 h-5 bg-[#E10000] flex items-center justify-center rounded-[4px]"><img src="/assets/calendar/calories.svg" class="w-3 h-3"></div> {{ item.calories }}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mt-4">
                                            <div class="inline-flex items-center gap-1 bg-[#AFFA01] text-[#404040] text-[11px] font-bold px-4 py-1 rounded-full">
                                                <img src="/assets/workout-lists/workout-run.svg" alt="">{{ item.tag }}
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col md:flex-row items-end justify-between gap-4 md:gap-6 mt-5">
                                    <div class="w-full md:w-[60%]">
                                        <div class="flex items-center justify-between text-[12px] text-[#757575] mb-2 font-medium">
                                            <span>Progress :</span> <span>{{ item.progress }}%</span>
                                        </div>
                                        <div class="w-full bg-[#E5E5E5] h-3 rounded-full overflow-hidden">
                                            <div class="bg-[#AFFA01] h-full rounded-full transition-all duration-500" [style.width.%]="item.progress"></div>
                                        </div>
                                    </div>
                                    <button class="w-full md:w-[35%] h-[42px] bg-[#D0F573] text-[#5f7a22] font-medium rounded-full text-[13px] flex items-center justify-center gap-2 shadow-sm cursor-default">
                                        <span class="text-lg font-light">+</span> Add New Log
                                    </button>
                                </div>
                            </div>

                            <div class="bg-[#F2F2F2] border-t border-[#E6E6E6]">
                                <div *ngIf="item.expanded" class="px-6 py-6 animate-in slide-in-from-top-2 duration-200">
                                    <div *ngIf="!item.logs || item.logs.length === 0" class="text-center py-2">
                                        <p class="text-[#A0A0A0] text-[14px] italic font-light">Your Log is Empty! Start Workout Now!</p>
                                    </div>
                                    <div *ngIf="item.logs && item.logs.length > 0" class="space-y-4">
                                        <div *ngFor="let log of item.logs" class="flex gap-3 items-stretch">
                                            <div class="w-[6px] bg-[#6A9700] rounded-full shrink-0"></div>
                                            <div class="flex-1 bg-[#DBF3A3] border border-[#AFFA01] p-4 rounded-[8px] shadow-sm flex justify-between items-start">
                                                <div><h5 class="text-[14px] font-bold text-[#1F1F1F]">{{ log.name }}</h5><p class="text-[12px] text-[#404040] mt-1 leading-relaxed">{{ log.description }}</p></div>
                                                <div class="flex items-center gap-2 text-right shrink-0 ml-4">
                                                    <div class="w-5 h-5 bg-[#6A9700] rounded-[4px] flex items-center justify-center"><img src="/assets/calendar/duration.svg" alt="" class="w-3 h-3"></div>
                                                    <span class="text-[11px] font-medium text-[#4A6418]">{{ log.duration }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="item.expanded" class="h-[1px] bg-[#D2D2D2] mx-6"></div>
                                <button (click)="toggleExpand(item)" class="w-full flex items-center justify-center gap-2 text-[#9E9E9E] text-[12px] font-medium py-3 hover:text-gray-600 transition group cursor-pointer">
                                    <img src="/assets/calendar/arrow-down.svg" alt="" class="transition-transform duration-300" [class.rotate-180]="item.expanded">
                                    {{ item.expanded ? 'Close All Log' : 'View All Log' }}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="text-[20px] font-bold text-[#A0A0A0] mb-5">Yesterday</h3>

                    <div class="flex flex-col gap-6">
                        <div *ngFor="let item of yesterdayActivities" class="bg-[#F9F9F9] rounded-[8px] border border-[#E6E6E6] overflow-hidden transition-all duration-300">
                            
                            <div class="p-6">
                                <div class="flex flex-col md:flex-row gap-6 mb-2">
                                    <div class="w-24 h-24 bg-[#BCE455] rounded-xl flex items-center justify-center flex-shrink-0">
                                        <img src="/assets/icons/running-man.svg" alt="icon" class="w-12 h-12 text-black"> 
                                    </div>
                                    <div class="flex-1 flex flex-col">
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <h4 class="text-[16px] font-medium">{{ item.title }}</h4>
                                                <p class="text-[11px] text-gray-500 mt-1 leading-relaxed max-w-md">{{ item.description }}</p>
                                            </div>
                                            <div class="flex flex-col gap-2 shrink-0 ml-4 mt-4 md:mt-0 items-end">
                                                <div class="flex items-center gap-2 text-[11px] text-[#5C8C00] font-medium">
                                                    <div class="w-5 h-5 bg-[#6A9700] flex items-center justify-center rounded-[4px]"><img src="/assets/calendar/duration.svg" alt="" class="w-3 h-3"></div> {{ item.time }}
                                                </div>
                                                <div class="flex items-center gap-2 text-[11px] text-[#E10000] font-medium">
                                                    <div class="w-5 h-5 bg-[#E10000] flex items-center justify-center rounded-[4px]"><img src="/assets/calendar/calories.svg" alt="" class="w-3 h-3"></div> {{ item.calories }}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mt-5.5">
                                            <div class="inline-flex items-center gap-1 bg-[#AFFA01] text-[#404040] text-[11px] font-medium px-3 py-1 rounded-[18.58px]">
                                                <img src="/assets/workout-lists/workout-run.svg" alt="">{{ item.tag }}
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col md:flex-row items-end justify-between gap-4 md:gap-6 mt-5">
                                    <div class="w-full md:w-[60%]">
                                        <div class="flex items-center justify-between text-[12px] text-[#757575] mb-2 font-medium">
                                            <span>Progress :</span> <span>{{ item.progress }}%</span>
                                        </div>
                                        <div class="w-full bg-[#E5E5E5] h-3 rounded-full overflow-hidden">
                                            <div class="bg-[#AFFA01] h-full rounded-full transition-all duration-500" [style.width.%]="item.progress"></div>
                                        </div>
                                    </div>

                                    <button *ngIf="item.status === 'unfinished'" class="w-full md:w-[35%] h-[42px] bg-[#EDE689] border border-[#A39200] text-[#876A00] font-bold rounded-full text-[13px] border border-[#E0DC6A] cursor-default">
                                        Unfinished
                                    </button>
                                    
                                    <button *ngIf="item.status !== 'unfinished'" class="w-full md:w-[35%] h-[42px] bg-[#D0F573] text-[#5f7a22] font-medium rounded-full text-[13px] flex items-center justify-center gap-2 shadow-sm cursor-default">
                                        <span class="text-lg font-light">+</span> Add New Log
                                    </button>
                                </div>
                            </div>

                            <div class="bg-[#F2F2F2] border-t border-[#E6E6E6]">
                                
                                <div *ngIf="item.expanded" class="px-6 py-6 animate-in slide-in-from-top-2 duration-200">
                                    <div *ngIf="!item.logs || item.logs.length === 0" class="text-center py-2">
                                        <p class="text-[#A0A0A0] text-[14px] italic font-light">Your Log is Empty!</p>
                                    </div>
                                    <div *ngIf="item.logs && item.logs.length > 0" class="space-y-4">
                                        <div *ngFor="let log of item.logs" class="flex gap-3 items-stretch">
                                            <div class="w-[6px] bg-[#6A9700] rounded-full shrink-0"></div>
                                            <div class="flex-1 bg-[#DBF3A3] border border-[#AFFA01] p-4 rounded-[8px] shadow-sm flex justify-between items-start">
                                                <div><h5 class="text-[14px] font-bold text-[#1F1F1F]">{{ log.name }}</h5><p class="text-[12px] text-[#404040] mt-1 leading-relaxed">{{ log.description }}</p></div>
                                                <div class="flex items-center gap-2 text-right shrink-0 ml-4">
                                                    <div class="w-5 h-5 bg-[#6A9700] rounded-[4px] flex items-center justify-center"><img src="/assets/calendar/duration.svg" alt="" class="w-3 h-3"></div>
                                                    <span class="text-[11px] font-medium text-[#4A6418]">{{ log.duration }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div *ngIf="item.expanded" class="h-[1px] bg-[#D2D2D2] mx-6"></div>
                                
                                <button (click)="toggleExpand(item)" class="w-full flex items-center justify-center gap-2 text-[#9E9E9E] text-[12px] font-medium py-3 hover:text-gray-600 transition group cursor-pointer">
                                    <img src="/assets/calendar/arrow-down.svg" alt="" class="transition-transform duration-300" [class.rotate-180]="item.expanded">
                                    {{ item.expanded ? 'Close All Log' : 'View All Log' }}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="hidden lg:block space-y-8 mt-7">
            <app-calendar [selectedMode]="selectedMode"></app-calendar>
        </div>

    </div>
</div>

<div *ngIf="isLogModalOpen" class="fixed inset-0 z-[9999] flex items-center justify-center px-4">
    </div>